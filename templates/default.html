<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Form Dự Đoán Iris</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">Nhập thông số hoa Iris</h2>
    <form id="predictForm">
        <div class="mb-3">
            <label for="sepalLength" class="form-label">Sepal Length</label>
            <input type="number" step="any" class="form-control" id="sepalLength" name="sepal_length" required>
        </div>
        <div class="mb-3">
            <label for="sepalWidth" class="form-label">Sepal Width</label>
            <input type="number" step="any" class="form-control" id="sepalWidth" name="sepal_width" required>
        </div>
        <div class="mb-3">
            <label for="petalLength" class="form-label">Petal Length</label>
            <input type="number" step="any" class="form-control" id="petalLength" name="petal_length" required>
        </div>
        <div class="mb-3">
            <label for="petalWidth" class="form-label">Petal Width</label>
            <input type="number" step="any" class="form-control" id="petalWidth" name="petal_width" required>
        </div>
        <button type="submit" class="btn btn-primary">Dự đoán</button>

    </form>

    <div id="result" class="mt-4"></div>
</div>

<script>
    document.getElementById('predictForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Ngăn form gửi mặc định

        const data = {
            sepal_length: parseFloat(document.getElementById('sepalLength').value),
            sepal_width: parseFloat(document.getElementById('sepalWidth').value),
            petal_length: parseFloat(document.getElementById('petalLength').value),
            petal_width: parseFloat(document.getElementById('petalWidth').value)
        };

        fetch('/api/iris-cls-api', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
            .then(async response => await response.json())
            .then(result => {
                document.getElementById('result').innerHTML =
                    `<div class="alert alert-success">Kết quả dự đoán: <strong>${result.prediction}</strong></div>`;
            })
            .catch(error => {
                console.error('Lỗi:', error);
                document.getElementById('result').innerHTML =
                    `<div class="alert alert-danger">Đã xảy ra lỗi khi gọi API.</div>`;
            });
    });
</script>
</body>
</html>